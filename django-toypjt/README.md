# 프로젝트 소개

## 개요

<br>

- [페이지 소개](#페이지-소개)
  - [첫 화면](#첫-화면)
    - 대문
    - 인트로 페이지
  - [메인 페이지](#메인-페이지)
    - 계정 관련
      - 로그인
      - 로그아웃
      - 회원가입
      - 회원정보
      - 회원정보 수정
      - 회원탈퇴
    - 게시판 관련
      - 쓰기
      - 읽기
      - 수정
      - 삭제
      - 댓글
      - 추천
    - 외부 링크 관련
      - 깃허브
  - [Contributors 페이지](#Contributors-페이지)
- [기능 소개](#기능-소개)
  - 네비게이션 바
    - 활동에 따라 팝업되는 메세지 박스
    - 검색 기능
- [발견된 이슈들](#발견된-이슈들)
  - [개선 / 테스트 계획](#개선-/-테스트-계획)
  

<br>

## 페이지 소개

<br>

- 헤로쿠로 배포된 사이트를 소개합니다.
- 게시글 저장 DB 는 PostgreSQL 을 연결하였습니다.
- 정적 파일 배포는 AWS S3 에 연결하여 사용하고 있습니다.

<br>

### 첫 화면

<br>

- [대문](https://guarded-tundra-99188.herokuapp.com/)
  - 일종의 대문 페이지 입니다.
  - 별 다른 의미는 없고 현재로서는 그냥 장식입니다.
- [인트로 페이지](https://guarded-tundra-99188.herokuapp.com/intro/)
  - [문경욱](https://github.com/9776mk) 님의 아이디어로 만들어졌습니다.
  - 프로젝트 팀원들을 합성하여 인트로 페이지로 활용하였습니다.

<br>

### 메인 페이지

<br>

- 계정 관련

  - [로그인](https://guarded-tundra-99188.herokuapp.com/accounts/login/)

    - 로그인 페이지 입니다.
    - 로그인 한 경우 환영 문구가 뜨게 하였습니다.
    - 이미 로그인 한 경우 접근 에러가 뜨게 하였습니다.

  - 로그아웃

    - 로그아웃은 별도 페이지 없이 현재 페이지에서 바로 로그아웃 할 수 있게 하였습니다.

      ```python
      # 로그아웃
      @login_required
      def logout(request):
          b = random.choice(bye)
          if request.user.full_name:
              messages.error(request, f"{request.user.full_name}님, {b}")
          else:
              messages.error(request, f"익명의 사용자님, {b}")
          logout_(request)
          return redirect(request.META.get("HTTP_REFERER", "redirect_if_referer_not_found"))
      ```

  - [회원가입](https://guarded-tundra-99188.herokuapp.com/accounts/signup/)

    - 회원가입 페이지 입니다.
    - 가입 시 필요한 정보들을 필수 입력과 선택 입력 사항들로 나누었습니다.
    - 선택 입력은 나중에 [회원정보 수정](https://guarded-tundra-99188.herokuapp.com/accounts/update/#/)에서 수정 할 수 있습니다.
    - 휴대폰 번호는 정수형으로 입력하면 자동으로 하이픈이 들어가게 했습니다.
    - 가입 완료시 환영 문구가 뜨게 했습니다.

  - [회원정보](https://guarded-tundra-99188.herokuapp.com/accounts/detail/#/)

    - 회원 상세정보 페이지 입니다.
    - 권한에 따라 볼 수 있는 정보는 다음과 같습니다.
      - 공개 정보
        - 이름
        - 이메일
        - 연락처
        - 가입일
      - 비공개 정보
        - 작성 리뷰 정보
          - 작성한 글
          - 작성한 댓글

  - [회원정보 수정](https://guarded-tundra-99188.herokuapp.com/accounts/update/#/)

    - 회원정보 수정 페이지 입니다.
    - [비밀번호 변경](https://guarded-tundra-99188.herokuapp.com/accounts/#/password/)은 다른 페이지에서 할 수 있습니다.
    - 회원정보 페이지에서 접근할 수 있습니다.
      - 로그인 하지 않은 경우 로그인이 필요합니다.
      - 로그인 했더라도 자신의 계정이 아니면 수정할 수 없습니다.
      - 관리자는 관리자 페이지에서만 개인 정보를 수정할 수 있게 하였습니다.

  - [회원탈퇴](https://guarded-tundra-99188.herokuapp.com/accounts/#/withdrawal/)

    - 회원탈퇴 페이지 입니다.
    - 확인을 한 번 더 하게끔 했습니다.
    - 탈퇴하면 탈퇴 문구가 뜹니다.


<br>

[목차로 돌아가기](#개요)

<br>

- 게시판 관련

  - [쓰기](https://guarded-tundra-99188.herokuapp.com/articles/create/)
    - 글쓰기 페이지 입니다.
    - 로그인 한 사람만 글을 쓸 수 있습니다.
    - 사진 파일과 평점을 등록할 수 있습니다.
      - 평점은 점수에 따라 별 개수로 바뀌어서 표현됩니다.
  - [읽기](https://guarded-tundra-99188.herokuapp.com/articles/#/)
    - 읽기 페이지 입니다.
    - 로그인 하지 않아도 읽을 수 있습니다.
    - 추천과 댓글달기는 로그인 한 뒤에 가능합니다.
  - [수정](https://guarded-tundra-99188.herokuapp.com/articles/update/#)
    - 수정 페이지 입니다.
    - 쓰기 페이지와 같은 폼을 사용합니다.
    - 권한이 없으면 수정할 수 없습니다.
  - [삭제](https://guarded-tundra-99188.herokuapp.com/articles/#/delete/)
    - 삭제 페이지 입니다.
    - 삭제 대상을 한 번 더 확인할 수 있습니다.
    - 권한이 없으면 삭제할 수 없습니다.
    - 삭제 시 서버 저장소에 있던 미디어 파일도 함께 삭제됩니다.
  - 댓글
    - 댓글은 별도의 페이지가 없이 게시물 페이지의 하단에 구현되어 있습니다.
    - 로그인 후 작성할 수 있습니다.
      - 수정, 삭제는 댓글의 주인만 가능합니다.
  - 추천
    - 추천은 별도의 페이지가 없이 게시물 페이지의 하단에 구현되어 있습니다.
    - 추천을 누르면 DB에서 조건에 맞는지 조회를 합니다.
      - 만약 추천을 누른 사람이 이전에 이 게시글에 대해 추천을 누른 적이 있다면,
        - 추천을 취소합니다.
      - 만약 추천을 누른 사람이 이 게시글에 새로운 추천을 누른 것이라면,
        - 추천을 1 올립니다.
    - 추천 수에 따라 글자색이 달라집니다.
      - 템플릿 태그를 작성하여 구현하였습니다.
      - 추천수 0
        - 흰색 ( 배경도 흰색이라 글자가 안보이게 됨 )
      - 추천수 1~5
        - 회색
      - 추천수 6~10
        - 노란색
      - 추천수 11~15
        - 굵은 노란색
      - 추천수 16~20
        - 빨간색
      - 추천수 21~
        - 굵은 빨간색
  - 외부 링크 관련
    - [깃허브](https://github.com/) 메인으로 연결되는 링크입니다.
    - `target = _blank` 로 새 창에서 열리게 하였습니다.
    - 깃허브 이미지를 사용하였습니다.

<br>

### Contributors 페이지

<br>

- [Contributors 페이지](https://guarded-tundra-99188.herokuapp.com/contrib/)
- 지난 한달+ 의 기간동안 같이 프로젝트를 하면서 크거나 작게 도움을 주신 분들의 이름이 나오는 페이지 입니다.
- 별도의 네비게이션 바 없이 페이지 최하단에 목록으로 가는 버튼을 만들었습니다.
- 최하단 footer 에는 프로젝트 조원들의 이름을 넣었습니다.
- 스크롤에 따른 애니메이션 효과를 주었습니다.

<br>

[목차로 돌아가기](#개요)

<br>

## 기능 소개

<br>

- 네비게이션 바
  - 활동에 따라 팝업되는 메세지 박스
    - 로그인 한 사용자와 그렇지 않은 사용자를 감지하여 다른 메세지가 출력되게 하였습니다.
    - 사용자의 활동을 일부 감지하여 해당하는 알림 문구가 출력되게 하였습니다.
      - 로그인
      - 회원가입
      - 회원탈퇴
      - 회원정보 수정
      - 일부 잘못된 접근 시 해당하는 문구 출력
      - 글 생성
      - 글 삭제
      - 글 수정
      - 글 추천
      - 댓글 작성
    - 검색 기능
      - 글목록 페이지를 공유합니다.
      - 작성 글 정보와 회원 정보를 검색할 수 있게 했습니다.

<br>

[목차로 돌아가기](#개요)

<br>

## 발견된 이슈

<br>

- 뷰포트별로 모양이 이상함
  - 현재 개선중에 있습니다.

- 추천을 누르거나 새로고침을 할 때마다 조회수가 늘어남
  - 사실 쿠키로 구현을 한 다음에 비 로그인 사용자에게 읽기 기능을 제한시키면 되는데,
  - 그러면 로그인 하기 싫은 비 로그인 사용자들한테 너무 매정한 것 같아서 그렇게 못했습니다...
  - 그 외에도 다른 방법이 여러 가지 있는것 같은데 일단 배포하고 다음에 개선하기로 함

- 가끔 정적 파일을 못 불러오는 경우가 있음
  - 서버 문제인 것 같은데 아직 잘 모르겠습니다.
  - 웹 폰트 로딩속도가 정적 파일들에게 통째로 영향을 주는지 확인해봐야 합니다.
  - 현재 cdn 쓰고있는것들 전부 로컬로 옮겨서 시험중입니다.
- 좋아요, 추천 등을 누르면 페이지 맨 위로 올라가서 불편함
  - 반복문을 통한 구현의 한계인 것 같습니다.
  - 그런데 사실 제 한계입니다.

<br>

### 개선 / 테스트 계획

<br>

- 새로고침 할 때마다 늘어나는 조회수 제어하기
  - 쿠키 혹은 ip를 받아서 해결하는 방법이 있어보입니다.
- 가끔씩 정적파일 못 불러오는 현상
  - aws s3 는 사실 파일 저장의 용도이기 때문에 배포에는 적절치 않다고 합니다.
  - 클라우드 프론트를 사용하면 속도와 비용이 개선될 수 있다고 합니다.
  - 웹 폰트 로딩속도가 정적 파일들에게 통째로 영향을 주는지 확인해봐야 합니다.
- 좋아요, 추천 등을 눌러도 스크롤 안 움직이게 하기
  - javascript 를 사용해서 동적으로 보여지게 만들 수 있을 것 같습니다.
- 뷰포트 크기별로 예쁘게 보여주기
  - 귀찮지만 최우선으로 해결해야 할 사항


<br>

[목차로 돌아가기](#개요)

<br>
